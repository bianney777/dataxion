<div class="topbar" style="background:var(--brand-surface); border-bottom:1px solid var(--brand-border); display:flex; align-items:center; gap:24px; padding:10px 18px;">
  <div class="brand" style="font-weight:700; letter-spacing:.5px; font-size:1rem; color:var(--brand-blue);">DataXion</div>
  <div class="topbar-search">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35M9.5 17a7.5 7.5 0 100-15 7.5 7.5 0 000 15z" /></svg>
    <input type="text" placeholder="Buscar fincas o lotes" id="globalSearch" />
  </div>
  <div class="topbar-actions" style="display:flex; align-items:center; gap:14px; margin-left:auto;">
    <button type="button" id="toggleTheme" class="theme-toggle-btn" title="Cambiar tema" style="background:var(--brand-surface-alt);border:1px solid var(--brand-border);width:38px;height:38px;border-radius:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;">
      <svg id="themeIcon" xmlns="http://www.w3.org/2000/svg" class="icon-sm" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v2m0 14v2m9-9h-2M5 12H3m15.364 6.364l-1.414-1.414M8.05 8.05L6.636 6.636m0 10.728l1.414-1.414M17.95 8.05l1.414-1.414"/></svg>
    </button>
    <div class="avatar" style="background:var(--brand-gradient-primary); color:#fff; width:36px; height:36px; display:flex; align-items:center; justify-content:center; border-radius:10px; font-size:.7rem; font-weight:600; letter-spacing:.5px; box-shadow:0 4px 10px -2px rgba(27,77,255,.45);">DX</div>
  </div>
</div>
<script>
 (function(){
   const root=document.documentElement; const btn=document.getElementById('toggleTheme'); const icon=document.getElementById('themeIcon');
   function apply(theme){ if(theme==='dark'){ root.classList.add('dark'); } else { root.classList.remove('dark'); } localStorage.setItem('theme',theme); updateIcon(); }
   function updateIcon(){
     if(!icon) return; const dark = root.classList.contains('dark');
     icon.innerHTML = dark ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />' : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v2m0 14v2m9-9h-2M5 12H3m15.364 6.364l-1.414-1.414M8.05 8.05L6.636 6.636m0 10.728l1.414-1.414M17.95 8.05l1.414-1.414" />';
   }
   const stored = localStorage.getItem('theme'); apply(stored||'light');
   btn && btn.addEventListener('click', ()=>{ apply(root.classList.contains('dark')? 'light':'dark'); });
 })();
</script>
