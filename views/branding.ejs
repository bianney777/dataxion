<!DOCTYPE html>
<html lang="es">
<head>
  <title>Branding | <%= brand.nombre %></title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/css/tailwind.css" />
  <style>
    :root { --brand-blue:#1B4DFF; --brand-blue-dark:#0A2A6B; --brand-green:#3CCB7F; --brand-dark:#1E1E24; --brand-light:#F5F7FA; }
    body { font-family: Inter, system-ui, sans-serif; background:linear-gradient(160deg,#f8faff 0%,#edf2f9 60%,#e7eef7 100%); min-height:100vh; }
    .header-bar { position:relative; background:linear-gradient(135deg,var(--brand-blue-dark), #07204f 65%); color:#fff; padding:28px 30px; border-radius:20px; display:flex; align-items:center; gap:40px; overflow:hidden; }
    .header-bar:before { content:""; position:absolute; width:300px; height:300px; background:radial-gradient(circle at center,rgba(27,77,255,0.45),transparent 70%); top:-80px; right:-80px; filter:blur(4px); }
    .logo-box { width:140px; height:140px; background:linear-gradient(145deg,var(--brand-blue),#1540d1); display:flex; align-items:center; justify-content:center; border-radius:24px; font-size:30px; font-weight:700; letter-spacing:1px; color:#fff; box-shadow:0 10px 30px -5px rgba(27,77,255,0.5), 0 4px 10px -2px rgba(0,0,0,0.3); }
    h2.section { font-size:19px; font-weight:600; display:flex; align-items:center; gap:8px; margin-bottom:14px; letter-spacing:.5px; color:#0A2A2E; }
    .grid-auto { display:grid; gap:1.1rem; grid-template-columns:repeat(auto-fill,minmax(150px,1fr)); }
    .swatch { width:100%; padding-top:60%; position:relative; border-radius:14px; overflow:hidden; box-shadow:0 4px 14px rgba(0,0,0,0.18); transition:.35s cubic-bezier(.4,.2,.2,1); isolation:isolate; }
    .swatch:after { content:""; position:absolute; inset:0; background:linear-gradient(180deg,transparent 40%,rgba(0,0,0,0.55)); opacity:.85; }
    .swatch:hover { transform:translateY(-4px) scale(1.02); box-shadow:0 8px 22px -4px rgba(0,0,0,0.25); }
    .swatch span { position:absolute; bottom:10px; left:12px; right:12px; font-size:11px; font-weight:600; color:#fff; display:flex; justify-content:space-between; align-items:center; }
    .contrast-badge { background:rgba(255,255,255,0.15); backdrop-filter:blur(6px); padding:2px 6px; border-radius:6px; font-size:10px; font-weight:500; letter-spacing:.5px; }
    .value-card { background:#fff; border:1px solid #e5e7eb; border-radius:14px; padding:16px 16px 18px; display:flex; flex-direction:column; gap:6px; box-shadow:0 4px 12px -2px rgba(0,0,0,0.07); position:relative; overflow:hidden; transition:.35s cubic-bezier(.4,.2,.2,1); }
    .value-card:before { content:""; position:absolute; inset:0; background:linear-gradient(145deg,rgba(27,77,255,0.05),transparent 60%); opacity:0; transition:.35s; }
    .value-card:hover:before { opacity:1; }
    .value-card:hover { transform:translateY(-4px); box-shadow:0 10px 24px -8px rgba(0,0,0,0.18); }
    .mood-item { background:#fff; padding:12px 14px; border-radius:10px; font-size:12px; font-weight:500; border:1px solid #d9e2ec; box-shadow:0 2px 4px rgba(0,0,0,0.06); position:relative; overflow:hidden; }
    .mood-item:after { content:""; position:absolute; inset:0; background:linear-gradient(145deg,rgba(27,77,255,0.06),transparent 70%); opacity:0; transition:.35s; }
    .mood-item:hover:after { opacity:1; }
    .tag { background:linear-gradient(145deg,#1B4DFF20,#1B4DFF10); color:#0A2A6B; font-size:11px; padding:5px 12px; border-radius:40px; font-weight:500; border:1px solid #1B4DFF40; letter-spacing:.3px; }
    .type-row { background:#fff; border:1px solid #e5e7eb; padding:12px 16px; border-radius:10px; display:flex; justify-content:space-between; align-items:center; font-size:13px; box-shadow:0 2px 4px rgba(0,0,0,.04); }
    .btn-back { font-size:12px; background:var(--brand-blue); color:#fff; padding:8px 18px; border-radius:8px; text-decoration:none; box-shadow:0 4px 10px -2px rgba(27,77,255,0.5); font-weight:500; letter-spacing:.4px; }
    .btn-back:hover { background:#1641d6; }
    .footer-note { font-size:11px; opacity:.55; margin-top:60px; text-align:center; }
    .btn-sample { background:var(--brand-blue); color:#fff; padding:10px 18px; border-radius:10px; font-size:13px; font-weight:500; letter-spacing:.3px; display:inline-flex; gap:6px; align-items:center; box-shadow:0 4px 12px -2px rgba(27,77,255,0.5); transition:.3s; }
    .btn-sample:hover { background:#1540d1; }
    .badge-green { background:var(--brand-green); color:#083a1f; font-size:11px; padding:4px 10px; border-radius:30px; font-weight:600; letter-spacing:.5px; box-shadow:0 2px 6px rgba(60,203,127,0.4); }
    .table-sample { width:100%; font-size:12px; border-collapse:separate; border-spacing:0 6px; }
    .table-sample thead th { text-align:left; font-size:11px; font-weight:600; letter-spacing:.5px; color:#425466; padding:4px 10px; }
    .table-sample tbody tr { background:#fff; box-shadow:0 2px 4px rgba(0,0,0,0.04); }
    .table-sample tbody td { padding:8px 10px; border-top:1px solid #eef2f6; border-bottom:1px solid #eef2f6; }
    .table-sample tbody tr:first-child td { border-top-left-radius:10px; border-top-right-radius:10px; }
    .table-sample tbody tr:last-child td { border-bottom-left-radius:10px; border-bottom-right-radius:10px; }
    .dark-slab { background:var(--brand-dark); color:#fafbfc; border-radius:16px; padding:24px 26px; position:relative; overflow:hidden; box-shadow:0 6px 20px -6px rgba(0,0,0,0.55); }
    .dark-slab:before { content:""; position:absolute; inset:0; background:radial-gradient(circle at 20% 20%,rgba(60,203,127,0.18),transparent 60%); }
    .code-sample { font-family: 'SFMono-Regular', Menlo, Consolas, monospace; font-size:11px; background:#101317; color:#cdd7e3; padding:10px 14px; border-radius:10px; overflow:auto; line-height:1.5; }
    .section-grid { display:grid; gap:26px; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); }
    .guideline-box { background:#fff; border:1px solid #e1e6ed; border-radius:16px; padding:18px 20px; box-shadow:0 4px 14px -4px rgba(0,0,0,0.08); position:relative; }
    .guideline-box h3 { font-size:14px; font-weight:600; margin-bottom:8px; letter-spacing:.4px; }
    .guideline-box p, .guideline-box li { font-size:12px; line-height:1.5; color:#475569; }
    .logo-usage-grid { display:grid; gap:18px; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); }
    .logo-sample { position:relative; border:1px solid #e2e8f0; border-radius:14px; padding:26px 10px; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:20px; letter-spacing:1px; }
    .logo-sample.dark { background:#0f172a; color:#fff; }
    .logo-sample.light { background:#ffffff; color:#1B4DFF; }
    .logo-minspace { outline:3px dashed #1B4DFF55; outline-offset:6px; }
    .dosdonts { display:grid; gap:18px; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); }
    .do { border-left:5px solid #3CCB7F; }
    .dont { border-left:5px solid #dc2626; }
    .contrast-table { width:100%; border-collapse:collapse; font-size:11px; }
    .contrast-table th, .contrast-table td { border:1px solid #e2e8f0; padding:6px 8px; text-align:center; }
    .contrast-table th { background:#f1f5f9; font-weight:600; }
    .pill-ok { background:#3CCB7F; color:#07371f; font-weight:600; padding:2px 8px; font-size:10px; border-radius:14px; }
    .pill-warn { background:#f59e0b; color:#3d2a00; font-weight:600; padding:2px 8px; font-size:10px; border-radius:14px; }
    .pill-bad { background:#ef4444; color:#2d0505; font-weight:600; padding:2px 8px; font-size:10px; border-radius:14px; }
    @media print { .btn-back, .floating-present, .toolbar-brand, .theme-toggle-btn { display:none !important; } body { background:#fff; } .header-bar { box-shadow:none; } }
    /* SVG wireframes container */
    .wf-card svg { width:100%; height:100%; display:block; }
    .wf-card { display:flex; flex-direction:column; }
  </style>
</head>
<body>
  <div class="max-w-6xl mx-auto px-5 py-6">
    <div class="flex justify-between items-center mb-6 top-actions">
      <h1 class="text-2xl font-bold tracking-tight text-slate-800"><%= brand.nombre %> Branding</h1>
      <div class="flex gap-3 items-center">
        <button id="btnExportPdf" class="btn-back" style="background:#0A2A6B;">Exportar PDF</button>
        <button id="btnPresentation" class="btn-back" style="background:#1B4DFF;">Modo Presentación</button>
        <a href="/dashboard" class="btn-back">Volver</a>
      </div>
    </div>
    <div class="header-bar mb-10">
      <div class="logo-box">
        <%= brand.nombre.toUpperCase().slice(0,8) %>
      </div>
      <div class="flex-1">
        <h2 class="text-white text-2xl font-semibold mb-1"><%= brand.nombre %></h2>
        <p class="text-slate-200 text-sm mb-2"><%= brand.slogan %></p>
        <p class="text-slate-100 text-[13px] leading-relaxed max-w-2xl"><%= brand.descripcion %></p>
        <div class="mt-3 flex gap-2 flex-wrap">
          <% brand.valores.slice(0,3).forEach(v=>{ %>
            <span class="tag"><%= v.titulo %></span>
          <% }) %>
        </div>
      </div>
    </div>

    <section class="mb-14">
      <h2 class="section">🎨 Paleta de Colores</h2>
      <div class="grid-auto">
        <% brand.paleta.forEach(c=>{ %>
          <% const color = c.hex; %>
          <div>
            <div class="swatch" data-color="<%- color %>"><span><span><%= c.nombre %></span><span class="contrast-badge"><%= color %></span></span></div>
          </div>
        <% }) %>
      </div>
    </section>

    <section class="mb-14">
      <h2 class="section">🚀 Misión & Visión</h2>
      <div class="section-grid">
        <div class="guideline-box fade-in-up">
          <h3>Misión</h3>
          <p>Empoderar la gestión agrícola mediante datos accionables, trazabilidad y analítica predictiva que optimiza rendimientos y sostenibilidad.</p>
        </div>
        <div class="guideline-box fade-in-up" style="animation-delay:.08s;">
          <h3>Visión</h3>
          <p>Ser la plataforma de referencia que orquesta inteligencia operativa agrícola en toda la cadena productiva latinoamericana.</p>
        </div>
        <div class="guideline-box fade-in-up" style="animation-delay:.16s;">
          <h3>Propuesta de Valor</h3>
          <ul style="margin-left:14px; list-style:disc; margin-top:6px;">
            <li>Decisiones en tiempo real</li>
            <li>Integración de ciclo completo</li>
            <li>Alertas y predicción de riesgo</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="mb-14">
      <h2 class="section">🎯 Personalidad & Tono</h2>
      <div class="section-grid">
        <div class="guideline-box">
          <h3>Tono</h3>
          <ul style="margin-left:14px; list-style:disc;">
            <li>Claro y directo</li>
            <li>Basado en evidencia</li>
            <li>Profesional sin ser frío</li>
            <li>Optimista y pragmático</li>
          </ul>
        </div>
        <div class="guideline-box">
          <h3>Principios de Comunicación</h3>
          <ul style="margin-left:14px; list-style:disc;">
            <li>Contexto antes de métricas</li>
            <li>Visual first para insights</li>
            <li>Consistencia terminológica</li>
            <li>Accesibilidad & contraste</li>
          </ul>
        </div>
        <div class="guideline-box">
          <h3>Mensajes Clave</h3>
          <p><strong>Eficiencia:</strong> reducimos fricción operativa.</p>
          <p><strong>Predictivo:</strong> anticipamos eventos críticos.</p>
          <p><strong>Sostenible:</strong> optimizamos insumos y huella.</p>
        </div>
      </div>
    </section>

    <section class="mb-14">
      <h2 class="section">🔐 Uso del Logo</h2>
      <div class="logo-usage-grid">
        <div class="logo-sample light">DataXion</div>
        <div class="logo-sample dark">DataXion</div>
        <div class="logo-sample light logo-minspace">DataXion</div>
        <div class="logo-sample dark" style="filter:grayscale(1); opacity:.65;">Variación monocroma</div>
      </div>
      <p class="text-[12px] text-slate-600 mt-3">Respetar espacio libre equivalente a la altura de la “D”. Evitar distorsión, rotación no alineada, efectos de sombra exagerados o degradados arbitrarios.</p>
    </section>

    <section class="mb-14">
      <h2 class="section">✅ Do & ❌ Don't</h2>
      <div class="dosdonts">
        <div class="guideline-box do">
          <h3>Hacer (Do)</h3>
          <ul style="margin-left:14px; list-style:disc;">
            <li>Usar azul primario en acciones clave</li>
            <li>Mantener jerarquía tipográfica</li>
            <li>Aplicar suficiente espaciado</li>
            <li>Validar contraste > 4.5:1 en texto normal</li>
          </ul>
        </div>
        <div class="guideline-box dont">
          <h3>No Hacer (Don't)</h3>
          <ul style="margin-left:14px; list-style:disc;">
            <li>Saturar de colores secundarios</li>
            <li>Usar sombras múltiples agresivas</li>
            <li>Abusar de mayúsculas</li>
            <li>Reducir logo por debajo de 48px de ancho</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="mb-14">
      <h2 class="section">📊 Contraste Rápido (Aproximado)</h2>
      <div class="guideline-box">
        <table class="contrast-table">
          <thead><tr><th>Fondo</th><th>Texto Primario</th><th>Resultado</th><th>Texto Inverso</th><th>Resultado</th></tr></thead>
          <tbody>
            <tr><td>#1B4DFF</td><td style="color:#fff; background:#1B4DFF;">#FFFFFF</td><td><span class="pill-ok">OK</span></td><td style="color:#1B4DFF; background:#FFFFFF;">#1B4DFF</td><td><span class="pill-ok">OK</span></td></tr>
            <tr><td>#0A2A6B</td><td style="color:#fff; background:#0A2A6B;">#FFFFFF</td><td><span class="pill-ok">OK</span></td><td style="color:#0A2A6B; background:#FFFFFF;">#0A2A6B</td><td><span class="pill-ok">OK</span></td></tr>
            <tr><td>#3CCB7F</td><td style="color:#083a1f; background:#3CCB7F;">#083A1F</td><td><span class="pill-ok">OK</span></td><td style="color:#3CCB7F; background:#FFFFFF;">#3CCB7F</td><td><span class="pill-warn">Medio</span></td></tr>
            <tr><td>#F5F7FA</td><td style="color:#1E293B; background:#F5F7FA;">#1E293B</td><td><span class="pill-ok">OK</span></td><td style="color:#F5F7FA; background:#1E293B;">#F5F7FA</td><td><span class="pill-ok">OK</span></td></tr>
          </tbody>
        </table>
        <p class="text-[11px] mt-2 opacity-70">Valores indicativos; para validación formal usar herramientas WCAG (ej. axe, Stark, WebAIM).</p>
      </div>
    </section>

    <section class="mb-14">
      <h2 class="section">🧭 Modelo de Negocio</h2>
      <div class="section-grid">
        <div class="guideline-box fade-in-up">
          <h3>Estructura</h3>
          <ul style="margin-left:14px; list-style:disc;">
            <li>Plataforma gratuita de uso operativo básico</li>
            <li>Monetización basada en analítica avanzada y venta de insights agregados</li>
            <li>Capas premium: predicción, benchmarking, alertas riesgos</li>
            <li>Marketplace futuro: insumos, servicios agronómicos</li>
          </ul>
        </div>
        <div class="guideline-box fade-in-up" style="animation-delay:.08s;">
          <h3>Fuentes de Ingreso</h3>
          <ul style="margin-left:14px; list-style:disc;">
            <li>Suscripciones analítica avanzada (B2B)</li>
            <li>Venta de datos agregados (tendencias regionales)</li>
            <li>Comisiones marketplace (futuro)</li>
            <li>API de datos (integradores externos)</li>
          </ul>
        </div>
        <div class="guideline-box fade-in-up" style="animation-delay:.16s;">
          <h3>Ventaja Competitiva</h3>
          <p style="margin:0">Integración vertical del ciclo agrícola + capa predictiva propia + dataset regional en crecimiento.</p>
        </div>
      </div>
    </section>

    <section class="mb-14">
      <h2 class="section">📈 Monetización de Datos</h2>
      <div class="guideline-box">
        <p class="text-[12px] leading-relaxed">Los datos se anonimizan y agregan para construir indicadores macro regionales sobre: rendimientos, ventanas de siembra, resistencia climática y patrones de insumos. Se comercializan en forma de:</p>
        <ul style="margin-left:18px; list-style:disc; font-size:12px; margin-top:8px;">
          <li>Reportes trimestrales de tendencias</li>
          <li>API con endpoints de benchmarking anónimo</li>
          <li>Dashboards especiales para proveedores y aseguradoras</li>
        </ul>
        <p class="text-[11px] mt-3 opacity-70">Cumplimiento: anonimización irreversible, agregación mínima n>25, exclusión datos sensibles.</p>
      </div>
    </section>

    <section class="mb-14">
      <h2 class="section">🤝 Beneficios para Socios / Inversores</h2>
      <div class="section-grid">
        <div class="guideline-box">
          <h3>Escalabilidad</h3>
          <p>Arquitectura modular orientada a expansión geográfica y multi-cultivo rápidamente.</p>
        </div>
        <div class="guideline-box">
          <h3>Margen Alto</h3>
          <p>Costos marginales bajos tras captura inicial de datos + upsells analíticos.</p>
        </div>
        <div class="guideline-box">
          <h3>Red de Datos</h3>
          <p>Efecto de red: cada nuevo usuario fortalece el valor de benchmarking.</p>
        </div>
        <div class="guideline-box">
          <h3>Diferenciación</h3>
          <p>Competidores fragmentados (ERPs, apps puntuales) sin integración total del ciclo.</p>
        </div>
      </div>
    </section>

    <section class="mb-14">
      <h2 class="section">💡 Razones para Invertir Ahora</h2>
      <div class="guideline-box">
        <ul style="margin-left:18px; list-style:disc; font-size:12px;">
          <li>Ventana temprana en consolidación ag-data regional</li>
          <li>Capacidad técnica ya probada (módulos productivos operativos)</li>
          <li>Hoja de ruta clara hacia monetización B2B</li>
          <li>Dataset inicial listo para escalar con mínima fricción</li>
          <li>Potencial de alianzas con agroinsumos y aseguradoras</li>
        </ul>
      </div>
    </section>

    <section class="mb-14">
      <h2 class="section">🗺️ Roadmap (Próximos 12 meses)</h2>
      <div class="guideline-box">
        <ul style="margin-left:18px; list-style:disc; font-size:12px;">
          <li>Q1: Motor de alertas climáticas + API externa inicial</li>
          <li>Q2: Modelos predictivos de rendimiento y stress hídrico</li>
          <li>Q3: Marketplace de servicios agronómicos y proveedores</li>
          <li>Q4: Benchmarking regional premium y score de riesgo productivo</li>
        </ul>
      </div>
    </section>

    <section class="mb-14">
      <h2 class="section">📌 KPIs Iniciales Objetivo</h2>
      <div class="guideline-box">
        <table class="contrast-table" style="font-size:11px;">
          <thead><tr><th>KPI</th><th>6 Meses</th><th>12 Meses</th><th>Nota</th></tr></thead>
          <tbody>
            <tr><td>Usuarios Activos</td><td>1.5K</td><td>5K</td><td>Expansión orgánica + referidos</td></tr>
            <tr><td>Ciclos Registrados</td><td>3K</td><td>11K</td><td>Adopción de módulos core</td></tr>
            <tr><td>Retención 90d</td><td>55%</td><td>65%</td><td>Mejoras UX + analítica</td></tr>
            <tr><td>MRR (USD)</td><td>8K</td><td>40K</td><td>Lanzamiento capas premium</td></tr>
            <tr><td>Dataset Regiones</td><td>3</td><td>7</td><td>Expansión LATAM</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Wireframes SVG simplificados -->
    <section class="mb-20">
      <h2 class="section">🧷 Wireframes (Vista Esquemática)</h2>
      <p class="text-[12px] text-slate-600 mb-4 max-w-3xl">Versión compacta en SVG para mostrar distribución y jerarquía sin sobrecargar la plantilla.</p>
      <div class="grid md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-6">
        <% const wireframes = [
          { nombre:'Registro', desc:'Campos clave y acción.', svg:`<svg viewBox='0 0 160 110'><rect x='0' y='0' width='28' height='110' rx='4' fill='#0A2A6B'/><rect x='36' y='6' width='60' height='8' rx='3' fill='#cbd5e1'/><rect x='36' y='22' width='100' height='10' rx='3' fill='#e2e8f0'/><rect x='36' y='38' width='100' height='10' rx='3' fill='#e2e8f0'/><rect x='36' y='54' width='100' height='10' rx='3' fill='#e2e8f0'/><rect x='36' y='80' width='46' height='12' rx='4' fill='#1B4DFF'/><rect x='86' y='80' width='46' height='12' rx='4' fill='#94a3b8'/></svg>`},
          { nombre:'Login', desc:'Acceso + recuperación.', svg:`<svg viewBox='0 0 160 110'><rect x='0' y='0' width='30' height='110' rx='4' fill='#0A2A6B'/><rect x='40' y='24' width='90' height='12' rx='4' fill='#e2e8f0'/><rect x='40' y='46' width='90' height='12' rx='4' fill='#e2e8f0'/><rect x='40' y='70' width='90' height='14' rx='4' fill='#1B4DFF'/><rect x='72' y='90' width='60' height='8' rx='3' fill='#cbd5e1'/></svg>`},
          { nombre:'Dashboard', desc:'KPIs y gráfico.', svg:`<svg viewBox='0 0 160 110'><rect x='0' y='0' width='26' height='110' rx='4' fill='#0A2A6B'/><rect x='32' y='6' width='26' height='20' rx='4' fill='#fff' stroke='#cbd5e1'/><rect x='62' y='6' width='26' height='20' rx='4' fill='#fff' stroke='#cbd5e1'/><rect x='92' y='6' width='26' height='20' rx='4' fill='#fff' stroke='#cbd5e1'/><rect x='122' y='6' width='26' height='20' rx='4' fill='#fff' stroke='#cbd5e1'/><rect x='32' y='32' width='116' height='40' rx='6' fill='#fff' stroke='#cbd5e1'/><g stroke='#1B4DFF' stroke-width='2'><polyline points='36,64 52,50 68,56 84,44 100,48 116,40 140,46' fill='none'/></g><rect x='32' y='76' width='116' height='28' rx='6' fill='#fff' stroke='#cbd5e1'/></svg>`},
          { nombre:'Catálogo', desc:'Listado filtrable.', svg:`<svg viewBox='0 0 160 110'><rect x='0' y='0' width='30' height='110' rx='4' fill='#0A2A6B'/><rect x='38' y='10' width='20' height='8' rx='4' fill='#1B4DFF'/><rect x='62' y='10' width='26' height='8' rx='4' fill='#94a3b8'/><rect x='92' y='10' width='34' height='8' rx='4' fill='#94a3b8'/><rect x='38' y='26' width='110' height='12' rx='4' fill='#fff' stroke='#cbd5e1'/><rect x='38' y='44' width='110' height='12' rx='4' fill='#fff' stroke='#cbd5e1'/><rect x='38' y='62' width='110' height='12' rx='4' fill='#fff' stroke='#cbd5e1'/><rect x='38' y='80' width='70' height='20' rx='6' fill='#fff' stroke='#cbd5e1'/><rect x='112' y='80' width='36' height='20' rx='6' fill='#1B4DFF'/></svg>`},
          { nombre:'Ciclos', desc:'Progreso & hitos.', svg:`<svg viewBox='0 0 160 110'><rect x='0' y='0' width='28' height='110' rx='4' fill='#0A2A6B'/><rect x='36' y='10' width='90' height='10' rx='5' fill='url(#g1)'/><rect x='36' y='28' width='20' height='20' rx='6' fill='#fff' stroke='#1B4DFF'/><rect x='60' y='28' width='20' height='20' rx='6' fill='#1B4DFF'/><rect x='84' y='28' width='20' height='20' rx='6' fill='#fff' stroke='#1B4DFF'/><rect x='36' y='56' width='116' height='30' rx='6' fill='#fff' stroke='#cbd5e1'/><defs><linearGradient id='g1'><stop offset='0%' stop-color='#1B4DFF'/><stop offset='100%' stop-color='#3CCB7F'/></linearGradient></defs></svg>`},
          { nombre:'Branding', desc:'Identidad & pitch.', svg:`<svg viewBox='0 0 160 110'><rect x='0' y='0' width='26' height='110' rx='4' fill='#0A2A6B'/><rect x='32' y='10' width='116' height='24' rx='6' fill='url(#g2)'/><rect x='32' y='42' width='22' height='18' rx='4' fill='#fff' stroke='#cbd5e1'/><rect x='58' y='42' width='22' height='18' rx='4' fill='#fff' stroke='#cbd5e1'/><rect x='84' y='42' width='22' height='18' rx='4' fill='#fff' stroke='#cbd5e1'/><rect x='110' y='42' width='22' height='18' rx='4' fill='#fff' stroke='#cbd5e1'/><rect x='136' y='42' width='12' height='18' rx='4' fill='#1B4DFF'/><rect x='32' y='66' width='116' height='32' rx='6' fill='#fff' stroke='#cbd5e1'/><defs><linearGradient id='g2'><stop offset='0%' stop-color='#1B4DFF'/><stop offset='100%' stop-color='#0A2A6B'/></linearGradient></defs></svg>`}
        ]; %>
        <% wireframes.forEach(w => { %>
          <div class="guideline-box p-3 flex flex-col wf-card">
            <h3 class="text-[12px] font-semibold mb-2"><%= w.nombre %></h3>
            <div class="bg-slate-50 border border-slate-200 rounded-md flex items-center justify-center overflow-hidden" style="aspect-ratio: 16/11;">
              <div class="w-full h-full" aria-hidden="true"><%- w.svg %></div>
            </div>
            <p class="text-[11px] mt-2 text-slate-600 leading-snug"><%= w.desc %></p>
          </div>
        <% }) %>
      </div>
    </section>

    <section class="mb-14">
      <h2 class="section">💎 Valores de Marca</h2>
      <div class="grid md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-4">
        <% brand.valores.forEach(v=>{ %>
          <div class="value-card">
            <div class="flex items-center gap-2">
              <span class="text-lg"><%= v.icon || '' %></span>
              <h3 class="text-[13px] font-semibold text-slate-700"><%= v.titulo %></h3>
            </div>
            <p class="text-[12px] leading-snug text-slate-600"><%= v.detalle %></p>
          </div>
        <% }) %>
      </div>
    </section>

    <section class="mb-14">
      <h2 class="section">🧩 Moodboard / Conceptos</h2>
      <div class="grid md:grid-cols-6 sm:grid-cols-4 grid-cols-2 gap-3">
        <% brand.moodboard.forEach(m=>{ %>
          <div class="mood-item"><%= m.label %></div>
        <% }) %>
      </div>
    </section>

    <section class="mb-14">
      <h2 class="section">🔤 Tipografías</h2>
      <div class="space-y-2">
        <% brand.tipografias.forEach(t=>{ %>
          <div class="type-row">
            <span class="font-semibold"><%= t.nombre %></span>
            <span class="text-[12px] opacity-70"><%= t.uso %></span>
          </div>
        <% }) %>
      </div>
    </section>

    <section class="mb-16">
      <h2 class="section">📝 Guías de Uso Rápidas</h2>
      <ul class="list-disc pl-5 text-[13px] space-y-1 text-slate-700">
        <li>Usar azul primario (#1B4DFF) para acciones principales y botones primarios.</li>
        <li>Aplicar verde acento (#3CCB7F) para estados de éxito y métricas positivas.</li>
        <li>Neutros claros para fondos y secciones extensas; neutro oscuro para texto base.</li>
        <li>Espaciado consistente (4 / 8 / 12 / 16 / 24) y bordes redondeados (8px / 12px).</li>
        <li>Iconografía ligera y a una sola línea, sin rellenos complejos.</li>
      </ul>
    </section>

    <section class="mb-20">
      <h2 class="section">🧪 Componentes Ejemplo</h2>
      <div class="grid md:grid-cols-2 gap-8">
        <div class="component-sample">
          <h3 class="text-sm font-semibold text-slate-700 flex items-center gap-2">Botones & Etiquetas <span class="badge-green">UI</span></h3>
          <div class="flex flex-wrap gap-4 items-center">
            <button class="btn-sample">Acción Primaria</button>
            <button class="btn-sample" style="background:var(--brand-green); box-shadow:0 4px 10px -2px rgba(60,203,127,0.55); color:#05361b;">Confirmar</button>
            <span class="tag">Etiqueta</span>
            <span class="badge-green">Éxito</span>
          </div>
          <p class="text-[12px] text-slate-600 leading-snug">Los botones usan tipografía semibold, padding horizontal amplio y esquinas redondeadas de 10px. Las sombras se moderan para mantener jerarquía sin ruido visual.</p>
        </div>
        <div class="component-sample">
          <h3 class="text-sm font-semibold text-slate-700 mb-1">Tabla / Datos</h3>
          <table class="table-sample">
            <thead><tr><th>Indicador</th><th>Valor</th><th>Tendencia</th></tr></thead>
            <tbody>
              <tr><td>Rendimiento</td><td>8.2 t/ha</td><td><span class="badge-green">+5%</span></td></tr>
              <tr><td>Humedad</td><td>41%</td><td><span class="tag">Estable</span></td></tr>
              <tr><td>Costos</td><td>$12k</td><td><span class="tag" style="color:#6b1a1a;border-color:#ffb3b3;background:linear-gradient(145deg,#ffe5e5,#ffecec);">+2%</span></td></tr>
            </tbody>
          </table>
          <p class="text-[12px] text-slate-600 leading-snug">Tablas con espaciamiento vertical aireado y filas flotantes para mejorar legibilidad en densidades medias.</p>
        </div>
        <div class="component-sample md:col-span-2">
          <h3 class="text-sm font-semibold text-slate-700 mb-1">Dark Surface / Código</h3>
          <div class="dark-slab mb-4">
            <div class="code-sample">// Ejemplo de configuración de cliente\nconst client = createDataxionClient({\n  apiKey: '***',\n  region: 'latam',\n  features: ['analytics','predictive','alerts']\n});\nawait client.sync();</div>
          </div>
          <p class="text-[12px] text-slate-600 leading-snug">Las superficies oscuras se reservan para áreas de enfoque técnico (logs, código, paneles avanzados) usando contraste controlado.</p>
        </div>
      </div>
    </section>

    <div class="footer-note">Documento de identidad visual inicial. Ajustar conforme evolucione el producto.</div>
  </div>
  <script>
    // Aplicar colores a swatches
    document.querySelectorAll('.swatch[data-color]').forEach(el=>{ const c = el.getAttribute('data-color'); if(c) el.style.backgroundColor = c; });
    (function(){
      const root = document.documentElement;
      const btnPres = document.getElementById('btnPresentation');
      const btnPdf = document.getElementById('btnExportPdf');
      btnPres && btnPres.addEventListener('click', ()=>{
        const active = root.classList.toggle('presentation-active');
        btnPres.textContent = active? 'Salir Presentación':'Modo Presentación';
      });
      async function ensureLibs(){
        if(!window.jspdf && !window.jsPDF){
          await new Promise((res,rej)=>{ const s=document.createElement('script'); s.src='https://cdn.jsdelivr.net/npm/jspdf'; s.onload=res; s.onerror=rej; document.head.appendChild(s); });
        }
        if(!window.jspdf?.autoTable && !window.jspdf?.jsPDF?.API?.autoTable){
          await new Promise((res,rej)=>{ const s=document.createElement('script'); s.src='https://cdn.jsdelivr.net/npm/jspdf-autotable'; s.onload=res; s.onerror=rej; document.head.appendChild(s); });
        }
      }
      async function exportPdf(){
        try {
          await ensureLibs();
          const { jsPDF } = window.jspdf || window;
          const doc = new jsPDF('p','mm','a4');
          const wrap = (text, size=11, leading=5) => { doc.setFontSize(size); const lines = doc.splitTextToSize(text, 180); lines.forEach(l=>{ doc.text(l,14,y); y+=leading; }); y+=2; };
          const valores = JSON.parse(`<%- JSON.stringify(brand.valores.map(v=>({titulo:v.titulo, detalle:v.detalle}))) %>`);
          let y=14;
          // Portada
          doc.setFillColor(11,42,107); doc.rect(0,0,210,297,'F');
          doc.setTextColor(255,255,255); doc.setFontSize(30); doc.text('<%= brand.nombre %>', 14,40);
          doc.setFontSize(14); doc.text('Identidad & Pitch Socios',14,52);
            doc.setFontSize(10); doc.text('Fecha: '+ new Date().toLocaleDateString(),14,60);
          // Resumen Estratégico
          doc.addPage(); y=18; doc.setTextColor(0,0,0); doc.setFontSize(18); doc.text('Resumen Estratégico',14,y); y+=10; wrap('DataXion integra el ciclo agrícola completo en una plataforma gratuita en su capa base, generando adopción masiva y construyendo un dataset regional único que habilita monetización por analítica avanzada y venta ética de insights agregados.');
          doc.setFontSize(14); doc.text('Misión & Visión',14,y); y+=8; doc.setFontSize(11);
          wrap('Misión: Empoderar la gestión agrícola mediante datos accionables, trazabilidad y analítica predictiva que optimiza rendimientos y sostenibilidad.');
          wrap('Visión: Ser la plataforma de referencia que orquesta inteligencia operativa agrícola en la cadena productiva latinoamericana.');
          // Valores
          doc.addPage(); y=18; doc.setFontSize(18); doc.text('Valores de Marca',14,y); y+=10; doc.setFontSize(11);
          valores.forEach(v=>{ doc.setFont(undefined,'bold'); doc.text('• '+v.titulo+':',14,y); doc.setFont(undefined,'normal'); const lines = doc.splitTextToSize(v.detalle, 150); const firstLine = lines.shift(); doc.text(firstLine, 40, y); lines.forEach(l=>{ y+=5; doc.text(l,40,y); }); y+=7; if(y>270){ doc.addPage(); y=18; } });
          // Modelo de negocio
          doc.addPage(); y=18; doc.setFontSize(18); doc.text('Modelo de Negocio',14,y); y+=10; doc.setFontSize(11); wrap('Estructura: Freemium operativo + capas premium analíticas + marketplace futuro.');
          doc.autoTable({ startY:y, styles:{ fontSize:9 }, head:[['Fuente','Descripción']], body:[
            ['Suscripciones','Analítica avanzada B2B (predicción, benchmarking).'],
            ['Datos Agregados','Tendencias regionales anonimizadas (rendimientos, ventanas, patrones).'],
            ['Marketplace (Futuro)','Servicios agronómicos, insumos, aseguradoras.'],
            ['API','Integraciones terceros / partners externos.']
          ]});
          // Razones / Ventajas
          doc.addPage(); y=18; doc.setFontSize(18); doc.text('Razones para Invertir',14,y); y+=10; doc.setFontSize(11); wrap('Ventana temprana en consolidación ag-data; arquitectura lista, módulos productivos activos y hoja clara hacia monetización B2B. Efecto de red por dataset incremental y potencial de alianzas estratégicas.');
          doc.setFontSize(14); doc.text('Ventajas Competitivas',14,y); y+=8; doc.setFontSize(10);
          doc.autoTable({ startY:y, styles:{ fontSize:9 }, head:[['Ventaja','Detalle']], body:[
            ['Integración Completa','Ciclo agrícola extremo a extremo.'],
            ['Dataset Regional','Mayor valor de benchmarking incremental.'],
            ['Escalabilidad','Arquitectura modular y replicable en regiones.'],
            ['Margen Bruto Potencial','Costos marginales bajos en capas analíticas.']
          ]});
          // KPIs
          doc.addPage(); y=18; doc.setFontSize(18); doc.text('KPIs Objetivo',14,y); y+=10; doc.autoTable({ startY:y, styles:{ fontSize:9 }, head:[['KPI','6 Meses','12 Meses','Nota']], body:[
            ['Usuarios Activos','1.5K','5K','Escalamiento orgánico'],
            ['Ciclos Registrados','3K','11K','Adopción módulos'],
            ['Retención 90d','55%','65%','Mejoras UX'],
            ['MRR (USD)','8K','40K','Upsells premium'],
            ['Regiones Dataset','3','7','Expansión LATAM']
          ]});
          // User Journey
          doc.addPage(); y=18; doc.setFontSize(18); doc.text('User Journey Inicial',14,y); y+=10; doc.setFontSize(11);
          const journey = [
            ['Registro','Captura de datos mínimos + validación'],
            ['Onboarding','Selección cultivo / región'],
            ['Dashboard','KPIs & alertas relevantes'],
            ['Catálogo','Gestión entidades / datos base'],
            ['Ciclos','Registro y seguimiento progreso'],
            ['Valor','Exportación / analítica / decisiones']
          ];
          doc.autoTable({ startY:y, styles:{ fontSize:9 }, head:[['Etapa','Objetivo']], body: journey });
          // Riesgos
          doc.addPage(); y=18; doc.setFontSize(18); doc.text('Riesgos & Mitigación',14,y); y+=10; doc.autoTable({ startY:y, styles:{ fontSize:9 }, head:[['Riesgo','Mitigación']], body:[
            ['Adopción Lenta','Onboarding guiado, referidos, casos prácticos.'],
            ['Privacidad','Anonimización fuerte, auditorías.'],
            ['Competencia Global','Foco regional y soporte local.'],
            ['Escalado Infra','Arquitectura modular y monitoreo.']
          ]});
          // Vistas clave
          doc.addPage(); y=18; doc.setFontSize(18); doc.text('Vistas Clave (Wireframes)',14,y); y+=10; doc.autoTable({ startY:y, styles:{ fontSize:9 }, head:[['Vista','Propósito']], body:[
            ['Registro','Captura mínima y verificación rápida.'],
            ['Login','Acceso seguro + recuperación.'],
            ['Dashboard','KPIs y alertas prioritarias.'],
            ['Catálogo','CRUD de entidades agrícolas.'],
            ['Ciclos','Progreso, hitos y métricas.'],
            ['Branding','Pitch & activos identidad.']
          ]});
          doc.save('pitch-dataxion.pdf');
        } catch(e){ console.error(e); alert('Fallo generando PDF. Usa imprimir si persiste.'); }
      }
      btnPdf && btnPdf.addEventListener('click', exportPdf);
    })();
  </script>
</body>
</html>