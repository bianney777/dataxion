/* --- Global Reset & Base --- */
* { box-sizing:border-box; }
html,body { height:100%; }
body { margin:0; font-family:'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background:#f1f5f9; color:#0f172a; -webkit-font-smoothing:antialiased; }
img { max-width:100%; display:block; }
a { color:inherit; }

/* --- Layout Shell (Reutilizable) --- */
.topbar { position:fixed; top:0; left:0; right:0; height:56px; background:#ffffff; display:flex; align-items:center; gap:16px; padding:0 20px; box-shadow:0 1px 0 rgba(0,0,0,0.08); z-index:60; }
.topbar .brand { font-size:20px; font-weight:700; background:linear-gradient(90deg,#2563eb,#16a34a); -webkit-background-clip:text; background-clip:text; color:transparent; letter-spacing:-0.5px; }
.topbar-search { flex:1; max-width:420px; position:relative; }
.topbar-search input { width:100%; background:#f1f5f9; border:1px solid #e2e8f0; border-radius:999px; padding:8px 14px 8px 40px; font-size:.85rem; outline:none; transition:.25s; }
.topbar-search input:focus { background:#fff; border-color:#94a3b8; box-shadow:0 0 0 3px rgba(148,163,184,0.25); }
.topbar-search svg { position:absolute; left:14px; top:50%; transform:translateY(-50%); width:16px; height:16px; color:#64748b; }
.topbar-actions { display:flex; align-items:center; gap:10px; }
.avatar { width:34px; height:34px; border-radius:50%; background:linear-gradient(135deg,#2563eb,#16a34a); display:flex; align-items:center; justify-content:center; font-size:.8rem; font-weight:600; color:#fff; }

.layout { display:flex; }
.sidebar-left { position:fixed; top:56px; left:0; bottom:0; width:230px; background:#f8fafc; border-right:1px solid #e2e8f0; padding:18px 14px 70px; overflow-y:auto; scrollbar-width:thin; }
.sidebar-left nav ul { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:4px; }
.sidebar-left a { display:flex; align-items:center; gap:10px; padding:10px 12px; font-size:.85rem; font-weight:500; color:#334155; border-radius:8px; transition:.25s; text-decoration:none; }
.sidebar-left a:hover { background:#e2e8f0; }
.sidebar-left a.active { background:#2563eb; color:#fff; box-shadow:0 2px 6px rgba(37,99,235,0.35); }
.sidebar-left svg { width:16px; height:16px; }

.rightbar { position:fixed; top:56px; right:0; bottom:0; width:300px; background:#ffffff; border-left:1px solid #e2e8f0; padding:20px 18px 60px; overflow-y:auto; display:flex; flex-direction:column; gap:18px; }
.right-card { background:#f1f5f9; border:1px solid #e2e8f0; border-radius:14px; padding:14px 16px; display:flex; flex-direction:column; gap:8px; }

.feed { flex:1; margin-top:56px; padding:28px 20px 80px; width:100%; }
@media (min-width: 1024px) { .feed { margin-left:230px; } }
@media (min-width: 1536px) { .feed { margin-right:300px; } }
@media (max-width:1023px){ .sidebar-left { display:none; } }
@media (max-width:1535px){ .rightbar { display:none; } }

/* --- Componentes Genéricos --- */
.btn { display:inline-flex; align-items:center; justify-content:center; gap:6px; background:#2563eb; color:#fff; font-weight:500; font-size:.85rem; padding:10px 18px; border-radius:8px; border:none; cursor:pointer; text-decoration:none; transition:.25s; box-shadow:0 2px 4px rgba(37,99,235,0.35); }
.btn:hover { background:#1d4ed8; }
.btn:active { transform:translateY(1px); }
.btn-outline { background:#f1f5f9; color:#1e293b; border:1px solid #cbd5e1; box-shadow:none; }
.btn-outline:hover { background:#e2e8f0; }
/* Variantes nuevas */
.btn-warning { background:#fbbf24; color:#1e293b; box-shadow:0 2px 4px rgba(251,191,36,0.35); }
.btn-warning:hover { background:#f59e0b; }
.btn-danger { background:#ef4444; }
.btn-danger:hover { background:#dc2626; }
.btn-success { background:#16a34a; }
.btn-success:hover { background:#15803d; }
.btn-ghost { background:rgba(255,255,255,0.6); color:#0f172a; border:1px solid rgba(0,0,0,0.05); box-shadow:none; }
.btn-ghost:hover { background:#fff; }
.btn-gradient { background:linear-gradient(90deg,#2563eb,#16a34a); box-shadow:0 4px 16px -4px rgba(37,99,235,0.5); }
.btn-gradient:hover { filter:brightness(1.08); }
.btn-xs { padding:6px 10px; font-size:.65rem; border-radius:6px; }
.btn-sm { padding:8px 14px; font-size:.75rem; }
.btn-pill { border-radius:999px; }

/* Barra progreso export */
#exportProgress { position:fixed; bottom:18px; left:50%; transform:translateX(-50%); width:260px; background:rgba(255,255,255,0.85); backdrop-filter:blur(8px); border:1px solid #e2e8f0; border-radius:12px; padding:10px 14px; box-shadow:0 8px 28px -8px rgba(0,0,0,0.25); display:flex; flex-direction:column; gap:6px; z-index:80; }
#exportProgress.hidden { display:none; }
#exportProgress .track { position:relative; width:100%; height:6px; background:#e2e8f0; border-radius:4px; overflow:hidden; }
#exportProgress .bar { position:absolute; left:0; top:0; height:100%; width:0%; background:linear-gradient(90deg,#2563eb,#16a34a); transition:width .4s cubic-bezier(.4,.0,.2,1); }
#exportProgress .label { font-size:.6rem; letter-spacing:.05em; font-weight:600; text-transform:uppercase; color:#475569; display:flex; justify-content:space-between; }

/* Colores pH métricas */
#metricPh.ph-acid { color:#dc2626; font-weight:600; }
#metricPh.ph-neutral { color:#16a34a; font-weight:600; }
#metricPh.ph-alk { color:#2563eb; font-weight:600; }

.card { background:#ffffff; border:1px solid #e2e8f0; border-radius:16px; padding:20px 22px; box-shadow:0 4px 14px -4px rgba(0,0,0,0.1); position:relative; overflow:hidden; }
.card h2, .card h3 { margin:0 0 8px; font-weight:600; }

/* --- Auth Containers (Login/Register) --- */
.auth-wrapper { display:flex; align-items:center; justify-content:center; min-height:100vh; padding:40px 16px; background:radial-gradient(circle at 30% 20%,#dbeafe,transparent 60%), radial-gradient(circle at 85% 70%,#dcfce7,transparent 55%), linear-gradient(135deg,#ffffff,#f1f5f9); }
.auth-box { width:100%; max-width:440px; background:rgba(255,255,255,0.9); backdrop-filter:blur(10px); padding:42px 40px 46px; border:1px solid #e2e8f0; border-radius:28px; box-shadow:0 10px 60px -15px rgba(30,41,59,0.25); position:relative; display:flex; flex-direction:column; gap:26px; }
.auth-box h1 { font-size:1.9rem; letter-spacing:-.5px; background:linear-gradient(90deg,#2563eb,#16a34a); -webkit-background-clip:text; background-clip:text; color:transparent; margin:0 0 6px; }
.field { position:relative; }
.field input { width:100%; padding:14px 14px 14px 46px; border:1px solid #cbd5e1; background:#f8fafc; border-radius:14px; font-size:.9rem; outline:none; transition:.25s; }
.field input:focus { border-color:#2563eb; background:#fff; box-shadow:0 0 0 3px rgba(37,99,235,.2); }
.field svg { position:absolute; left:14px; top:50%; transform:translateY(-50%); width:18px; height:18px; color:#2563eb; opacity:.9; }
.form-actions { display:flex; flex-direction:column; gap:12px; }
.alt-links { font-size:.75rem; color:#64748b; display:flex; justify-content:space-between; }
.alt-links a { color:#2563eb; text-decoration:none; font-weight:500; }

/* Mensaje error */
.alert-error { background:#fee2e2; color:#991b1b; padding:10px 14px; border-radius:10px; font-size:.75rem; font-weight:500; }

/* Icon Helpers */
.icon-xs { width:14px; height:14px; }
.icon-sm { width:16px; height:16px; }

/* Dark Mode (class based) */
html.dark body { background:#0f172a; color:#e2e8f0; }
html.dark .topbar { background:#1e293b; box-shadow:0 1px 0 rgba(255,255,255,0.06); }
html.dark .sidebar-left { background:#1e293b; border-color:#334155; }
html.dark .sidebar-left a { color:#cbd5e1; }
html.dark .sidebar-left a:hover { background:#334155; }
html.dark .sidebar-left a.active { background:#2563eb; color:#fff; }
html.dark .rightbar { background:#1e293b; border-color:#334155; }
html.dark .right-card { background:#0f172a; border-color:#334155; }
html.dark .avatar { background:linear-gradient(135deg,#2563eb,#0f766e); }
html.dark .btn { box-shadow:none; }
html.dark .btn-outline { background:#1e293b; color:#cbd5e1; border-color:#334155; }
html.dark .btn-outline:hover { background:#334155; }
html.dark .btn-warning { background:#f59e0b; color:#1e293b; }
html.dark .btn-warning:hover { background:#d97706; }
html.dark .btn-danger { background:#b91c1c; }
html.dark .btn-danger:hover { background:#991b1b; }
html.dark .btn-success { background:#15803d; }
html.dark .btn-success:hover { background:#166534; }
html.dark .btn-ghost { background:rgba(255,255,255,0.08); color:#e2e8f0; border-color:#334155; }
html.dark .btn-ghost:hover { background:rgba(255,255,255,0.15); }
html.dark #exportProgress { background:rgba(30,41,59,0.85); border-color:#334155; }
html.dark #exportProgress .track { background:#334155; }
html.dark .card { background:#1e293b; border-color:#334155; }
html.dark .auth-box { background:rgba(30,41,59,0.85); border-color:#334155; }
html.dark .field input { background:#1e293b; border-color:#334155; color:#e2e8f0; }
html.dark .field input:focus { border-color:#2563eb; }
html.dark .alt-links { color:#94a3b8; }
html.dark .alert-error { background:#7f1d1d; color:#fee2e2; }

/* Responsive auth */
@media (max-width:520px){ .auth-box { padding:34px 26px 42px; border-radius:22px; } .auth-box h1 { font-size:1.55rem; } }

/* Utility animations */
@keyframes fadeInUp { from { opacity:0; transform:translateY(12px);} to { opacity:1; transform:translateY(0);} }
.animate-in { animation:fadeInUp .6s cubic-bezier(.19,1,.22,1); }

