/* --- Global Reset & Base --- */
* { box-sizing:border-box; }
html,body { height:100%; }
body { margin:0; font-family:'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background:#f1f5f9; color:#0f172a; -webkit-font-smoothing:antialiased; }
img { max-width:100%; display:block; }
a { color:inherit; }

/* --- Layout Shell (Reutilizable) --- */
.topbar { position:fixed; top:0; left:0; right:0; height:56px; background:#ffffff; display:flex; align-items:center; gap:16px; padding:0 20px; box-shadow:0 1px 0 rgba(0,0,0,0.08); z-index:60; }
.topbar .brand { font-size:20px; font-weight:700; background:linear-gradient(90deg,#2563eb,#16a34a); -webkit-background-clip:text; background-clip:text; color:transparent; letter-spacing:-0.5px; }
.topbar-search { flex:1; max-width:420px; position:relative; }
.topbar-search input { width:100%; background:#f1f5f9; border:1px solid #e2e8f0; border-radius:999px; padding:8px 14px 8px 40px; font-size:.85rem; outline:none; transition:.25s; }
.topbar-search input:focus { background:#fff; border-color:#94a3b8; box-shadow:0 0 0 3px rgba(148,163,184,0.25); }
.topbar-search svg { position:absolute; left:14px; top:50%; transform:translateY(-50%); width:16px; height:16px; color:#64748b; }
.topbar-actions { display:flex; align-items:center; gap:10px; }
.avatar { width:34px; height:34px; border-radius:50%; background:linear-gradient(135deg,#2563eb,#16a34a); display:flex; align-items:center; justify-content:center; font-size:.8rem; font-weight:600; color:#fff; }

.layout { display:flex; }
.sidebar-left { position:fixed; top:56px; left:0; bottom:0; width:230px; background:#f8fafc; border-right:1px solid #e2e8f0; padding:18px 14px 70px; overflow-y:auto; scrollbar-width:thin; }
.sidebar-left nav ul { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:4px; }
.sidebar-left a { display:flex; align-items:center; gap:10px; padding:10px 12px; font-size:.85rem; font-weight:500; color:#334155; border-radius:8px; transition:.25s; text-decoration:none; }
.sidebar-left a:hover { background:#e2e8f0; }
.sidebar-left a.active { background:#2563eb; color:#fff; box-shadow:0 2px 6px rgba(37,99,235,0.35); }
.sidebar-left svg { width:16px; height:16px; }

.rightbar { position:fixed; top:56px; right:0; bottom:0; width:300px; background:#ffffff; border-left:1px solid #e2e8f0; padding:20px 18px 60px; overflow-y:auto; display:flex; flex-direction:column; gap:18px; }
.right-card { background:#f1f5f9; border:1px solid #e2e8f0; border-radius:14px; padding:14px 16px; display:flex; flex-direction:column; gap:8px; }

.feed { flex:1; margin-top:56px; padding:28px 20px 80px; width:100%; }
@media (min-width: 1024px) { .feed { margin-left:230px; } }
@media (min-width: 1536px) { .feed { margin-right:300px; } }
@media (max-width:1023px){ .sidebar-left { display:none; } }
@media (max-width:1535px){ .rightbar { display:none; } }

/* --- Componentes Genéricos --- */
.btn { display:inline-flex; align-items:center; justify-content:center; gap:6px; background:#2563eb; color:#fff; font-weight:500; font-size:.85rem; padding:10px 18px; border-radius:8px; border:none; cursor:pointer; text-decoration:none; transition:.25s; box-shadow:0 2px 4px rgba(37,99,235,0.35); }
.btn:hover { background:#1d4ed8; }
.btn:active { transform:translateY(1px); }
.btn-outline { background:#f1f5f9; color:#1e293b; border:1px solid #cbd5e1; box-shadow:none; }
.btn-outline:hover { background:#e2e8f0; }
/* Variantes nuevas */
.btn-warning { background:#fbbf24; color:#1e293b; box-shadow:0 2px 4px rgba(251,191,36,0.35); }
.btn-warning:hover { background:#f59e0b; }
.btn-danger { background:#ef4444; }
.btn-danger:hover { background:#dc2626; }
.btn-success { background:#16a34a; }
.btn-success:hover { background:#15803d; }
.btn-ghost { background:rgba(255,255,255,0.6); color:#0f172a; border:1px solid rgba(0,0,0,0.05); box-shadow:none; }
.btn-ghost:hover { background:#fff; }
.btn-gradient { background:linear-gradient(90deg,#2563eb,#16a34a); box-shadow:0 4px 16px -4px rgba(37,99,235,0.5); }
.btn-gradient:hover { filter:brightness(1.08); }
.btn-xs { padding:6px 10px; font-size:.65rem; border-radius:6px; }
.btn-sm { padding:8px 14px; font-size:.75rem; }
.btn-pill { border-radius:999px; }

/* Input modern (usado en catálogo) */
.input-modern { background:#ffffff; border:1px solid #d1d5db; border-radius:10px; padding:10px 14px; font-size:.8rem; outline:none; transition:.25s; }
.input-modern:focus { border-color:#2563eb; box-shadow:0 0 0 3px rgba(37,99,235,.2); }
html.dark .input-modern { background:#1e293b; border-color:#334155; color:#e2e8f0; }
html.dark .input-modern:focus { border-color:#2563eb; }

/* Barra progreso export */
#exportProgress { position:fixed; bottom:18px; left:50%; transform:translateX(-50%); width:260px; background:rgba(255,255,255,0.85); backdrop-filter:blur(8px); border:1px solid #e2e8f0; border-radius:12px; padding:10px 14px; box-shadow:0 8px 28px -8px rgba(0,0,0,0.25); display:flex; flex-direction:column; gap:6px; z-index:80; }
#exportProgress.hidden { display:none; }
#exportProgress .track { position:relative; width:100%; height:6px; background:#e2e8f0; border-radius:4px; overflow:hidden; }
#exportProgress .bar { position:absolute; left:0; top:0; height:100%; width:0%; background:linear-gradient(90deg,#2563eb,#16a34a); transition:width .4s cubic-bezier(.4,.0,.2,1); }
#exportProgress .label { font-size:.6rem; letter-spacing:.05em; font-weight:600; text-transform:uppercase; color:#475569; display:flex; justify-content:space-between; }

/* Colores pH métricas */
#metricPh.ph-acid { color:#dc2626; font-weight:600; }
#metricPh.ph-neutral { color:#16a34a; font-weight:600; }
#metricPh.ph-alk { color:#2563eb; font-weight:600; }

.card { background:#ffffff; border:1px solid #e2e8f0; border-radius:16px; padding:20px 22px; box-shadow:0 4px 14px -4px rgba(0,0,0,0.1); position:relative; overflow:hidden; }
.card h2, .card h3 { margin:0 0 8px; font-weight:600; }

/* --- Auth Containers (Login/Register) --- */
.auth-wrapper { display:flex; align-items:center; justify-content:center; min-height:100vh; padding:40px 16px; background:radial-gradient(circle at 30% 20%,#dbeafe,transparent 60%), radial-gradient(circle at 85% 70%,#dcfce7,transparent 55%), linear-gradient(135deg,#ffffff,#f1f5f9); }
.auth-box { width:100%; max-width:440px; background:rgba(255,255,255,0.9); backdrop-filter:blur(10px); padding:42px 40px 46px; border:1px solid #e2e8f0; border-radius:28px; box-shadow:0 10px 60px -15px rgba(30,41,59,0.25); position:relative; display:flex; flex-direction:column; gap:26px; }
.auth-box h1 { font-size:1.9rem; letter-spacing:-.5px; background:linear-gradient(90deg,#2563eb,#16a34a); -webkit-background-clip:text; background-clip:text; color:transparent; margin:0 0 6px; }
.field { position:relative; }
.field input { width:100%; padding:14px 14px 14px 46px; border:1px solid #cbd5e1; background:#f8fafc; border-radius:14px; font-size:.9rem; outline:none; transition:.25s; }
.field input:focus { border-color:#2563eb; background:#fff; box-shadow:0 0 0 3px rgba(37,99,235,.2); }
.field svg { position:absolute; left:14px; top:50%; transform:translateY(-50%); width:18px; height:18px; color:#2563eb; opacity:.9; }
.form-actions { display:flex; flex-direction:column; gap:12px; }
.alt-links { font-size:.75rem; color:#64748b; display:flex; justify-content:space-between; }
.alt-links a { color:#2563eb; text-decoration:none; font-weight:500; }

/* Mensaje error */
.alert-error { background:#fee2e2; color:#991b1b; padding:10px 14px; border-radius:10px; font-size:.75rem; font-weight:500; }

/* Icon Helpers */
.icon-xs { width:14px; height:14px; }
.icon-sm { width:16px; height:16px; }

/* Dark Mode (class based) */
html.dark body { background:#0f172a; color:#e2e8f0; }
html.dark .topbar { background:#1e293b; box-shadow:0 1px 0 rgba(255,255,255,0.06); }
html.dark .sidebar-left { background:#1e293b; border-color:#334155; }
html.dark .sidebar-left a { color:#cbd5e1; }
html.dark .sidebar-left a:hover { background:#334155; }
html.dark .sidebar-left a.active { background:#2563eb; color:#fff; }
html.dark .rightbar { background:#1e293b; border-color:#334155; }
html.dark .right-card { background:#0f172a; border-color:#334155; }
html.dark .avatar { background:linear-gradient(135deg,#2563eb,#0f766e); }
html.dark .btn { box-shadow:none; }
html.dark .btn-outline { background:#1e293b; color:#cbd5e1; border-color:#334155; }
html.dark .btn-outline:hover { background:#334155; }
html.dark .btn-warning { background:#f59e0b; color:#1e293b; }
html.dark .btn-warning:hover { background:#d97706; }
html.dark .btn-danger { background:#b91c1c; }
html.dark .btn-danger:hover { background:#991b1b; }
html.dark .btn-success { background:#15803d; }
html.dark .btn-success:hover { background:#166534; }
html.dark .btn-ghost { background:rgba(255,255,255,0.08); color:#e2e8f0; border-color:#334155; }
html.dark .btn-ghost:hover { background:rgba(255,255,255,0.15); }
html.dark #exportProgress { background:rgba(30,41,59,0.85); border-color:#334155; }
html.dark #exportProgress .track { background:#334155; }
html.dark .card { background:#1e293b; border-color:#334155; }
html.dark .auth-box { background:rgba(30,41,59,0.85); border-color:#334155; }
html.dark .field input { background:#1e293b; border-color:#334155; color:#e2e8f0; }
html.dark .field input:focus { border-color:#2563eb; }
html.dark .alt-links { color:#94a3b8; }
html.dark .alert-error { background:#7f1d1d; color:#fee2e2; }

/* Responsive auth */
@media (max-width:520px){ .auth-box { padding:34px 26px 42px; border-radius:22px; } .auth-box h1 { font-size:1.55rem; } }

/* Utility animations */
@keyframes fadeInUp { from { opacity:0; transform:translateY(12px);} to { opacity:1; transform:translateY(0);} }
.animate-in { animation:fadeInUp .6s cubic-bezier(.19,1,.22,1); }

/* --- Catálogo Agrícola: Modales & Badges --- */
.modal-overlay { position:fixed; inset:0; background:rgba(15,23,42,0.55); backdrop-filter:blur(6px); display:flex; align-items:flex-start; justify-content:center; padding:90px 18px 40px; overflow-y:auto; z-index:120; animation:fadeInUp .45s cubic-bezier(.25,.8,.25,1); }
.modal-box { width:100%; max-width:620px; background:rgba(255,255,255,0.9); border:1px solid #e2e8f0; border-radius:26px; padding:28px 30px 34px; position:relative; box-shadow:0 20px 70px -18px rgba(0,0,0,0.35); display:flex; flex-direction:column; gap:22px; }
.modal-box h3 { margin:0; font-size:1.1rem; font-weight:600; letter-spacing:-.5px; background:linear-gradient(90deg,#2563eb,#16a34a); -webkit-background-clip:text; background-clip:text; color:transparent; }
.modal-close { position:absolute; top:12px; right:12px; background:#f1f5f9; border:1px solid #e2e8f0; width:34px; height:34px; border-radius:12px; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:.25s; }
.modal-close:hover { background:#e2e8f0; }
.modal-grid { display:grid; gap:16px; grid-template-columns:1fr 1fr; }
@media (max-width:640px){ .modal-grid { grid-template-columns:1fr; } .modal-box { padding:26px 22px 30px; border-radius:22px; } }

.badge { display:inline-flex; align-items:center; gap:4px; font-size:.55rem; font-weight:600; letter-spacing:.05em; text-transform:uppercase; padding:5px 9px 5px; border-radius:999px; background:#f1f5f9; color:#475569; border:1px solid #e2e8f0; }
.badge-blue { background:#dbeafe; color:#1e3a8a; border-color:#bfdbfe; }
.badge-green { background:#dcfce7; color:#166534; border-color:#bbf7d0; }
.badge-amber { background:#fef9c3; color:#92400e; border-color:#fde68a; }
.badge-pink { background:#fce7f3; color:#9d174d; border-color:#fbcfe8; }

.status-badge { font-size:.55rem; font-weight:600; letter-spacing:.05em; text-transform:uppercase; background:#2563eb; color:#fff; padding:6px 10px 5px; border-radius:999px; display:inline-flex; align-items:center; gap:4px; box-shadow:0 2px 4px rgba(37,99,235,0.35); }
.status-activa { background:#16a34a; }
.status-inactiva { background:#64748b; }

.metric-chip { display:inline-flex; align-items:center; gap:4px; background:#f1f5f9; border:1px solid #e2e8f0; padding:4px 10px; font-size:.55rem; font-weight:600; letter-spacing:.05em; border-radius:999px; text-transform:uppercase; color:#475569; }
html.dark .metric-chip { background:#1e293b; border-color:#334155; color:#cbd5e1; }

html.dark .modal-overlay { background:rgba(0,0,0,0.6); }
html.dark .modal-box { background:rgba(30,41,59,0.92); border-color:#334155; }
html.dark .modal-close { background:#1e293b; border-color:#334155; color:#e2e8f0; }
html.dark .modal-close:hover { background:#334155; }

/* Icon Picker */
.icon-picker-trigger { display:inline-flex; align-items:center; gap:6px; background:#f1f5f9; border:1px solid #e2e8f0; padding:8px 12px; border-radius:10px; font-size:.7rem; font-weight:600; cursor:pointer; transition:.25s; }
.icon-picker-trigger:hover { background:#e2e8f0; }
.icon-preview { width:26px; height:26px; display:flex; align-items:center; justify-content:center; border-radius:8px; background:#fff; border:1px solid #e2e8f0; font-size:16px; }
.icon-picker-panel { position:absolute; top:100%; left:0; margin-top:10px; width:380px; max-width:calc(100vw - 32px); background:rgba(255,255,255,0.95); border:1px solid #e2e8f0; border-radius:18px; padding:14px 16px 18px; box-shadow:0 18px 60px -12px rgba(0,0,0,0.25); display:grid; gap:10px; grid-template-columns:repeat(auto-fill,minmax(70px,1fr)); animation:fadeInUp .35s; z-index:160; }
.icon-picker-item { display:flex; flex-direction:column; gap:4px; align-items:center; justify-content:center; padding:8px 6px 10px; border:1px solid #e2e8f0; background:#f8fafc; border-radius:14px; cursor:pointer; font-size:.55rem; font-weight:600; text-transform:uppercase; letter-spacing:.05em; color:#475569; transition:.25s; }
.icon-picker-item:hover { background:#fff; box-shadow:0 4px 14px -4px rgba(0,0,0,0.15); }
.icon-picker-item .ico { width:28px; height:28px; display:flex; align-items:center; justify-content:center; }
html.dark .icon-picker-trigger { background:#1e293b; border-color:#334155; color:#cbd5e1; }
html.dark .icon-picker-trigger:hover { background:#334155; }
html.dark .icon-preview { background:#0f172a; border-color:#334155; }
html.dark .icon-picker-panel { background:rgba(30,41,59,0.95); border-color:#334155; }
html.dark .icon-picker-item { background:#1e293b; border-color:#334155; color:#94a3b8; }
html.dark .icon-picker-item:hover { background:#334155; }

/* Inline form inputs inside modal */
.modal-box .input-modern { font-size:.75rem; padding:9px 12px; }
.form-row { display:flex; flex-direction:column; gap:6px; }
.form-row label { font-size:.55rem; font-weight:600; letter-spacing:.06em; text-transform:uppercase; color:#475569; }
html.dark .form-row label { color:#94a3b8; }

/* Placeholder shimmer for dynamic lists (variedades, etc.) */
.shimmer { position:relative; overflow:hidden; background:#f1f5f9; }
.shimmer::after { content:""; position:absolute; inset:0; background:linear-gradient(110deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.6) 40%, rgba(255,255,255,0) 80%); animation:shimmer 1.8s infinite; }
@keyframes shimmer { 0% { transform:translateX(-100%);} 100% { transform:translateX(100%);} }
html.dark .shimmer { background:#1e293b; }
html.dark .shimmer::after { background:linear-gradient(110deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.15) 40%, rgba(255,255,255,0) 80%); }

/* --- Catalog Panels Redesign --- */
.catalog-panel { background:linear-gradient(135deg,#ffffff 0%,#f8fafc 60%,#f1f5f9 100%); position:relative; box-shadow:0 6px 28px -10px rgba(0,0,0,0.15); transition:.35s; }
.catalog-panel::before { content:""; position:absolute; inset:0; background:radial-gradient(circle at 85% 20%, rgba(16,185,129,0.08), transparent 60%); opacity:0; transition:.4s; pointer-events:none; }
.catalog-panel:hover { transform:translateY(-3px); box-shadow:0 12px 34px -12px rgba(0,0,0,0.25); }
.catalog-panel:hover::before { opacity:1; }
html.dark .catalog-panel { background:linear-gradient(135deg,#1e293b,#0f172a); box-shadow:0 6px 24px -8px rgba(0,0,0,0.6); }
html.dark .catalog-panel::before { background:radial-gradient(circle at 80% 18%, rgba(16,185,129,0.15), transparent 65%); }
.panel-sublist { backdrop-filter:blur(10px); }

.cat-icon-bubble { width:54px; height:54px; border-radius:18px; background:linear-gradient(135deg,#dcfce7,#bbf7d0); border:1px solid #bbf7d0; display:flex; align-items:center; justify-content:center; font-size:26px; font-weight:600; box-shadow:0 4px 18px -6px rgba(16,185,129,0.4); position:relative; overflow:hidden; }
.cat-icon-bubble::after { content:""; position:absolute; inset:0; background:radial-gradient(circle at 30% 30%,rgba(255,255,255,0.6),transparent 60%); mix-blend-mode:overlay; opacity:.7; }
html.dark .cat-icon-bubble { background:linear-gradient(135deg,#065f46,#064e3b); border-color:#065f46; box-shadow:0 4px 18px -6px rgba(16,185,129,0.5); }
.cat-icon-insumo { background:linear-gradient(135deg,#e0e7ff,#c7d2fe); border-color:#c7d2fe; box-shadow:0 4px 18px -6px rgba(99,102,241,0.35); }
html.dark .cat-icon-insumo { background:linear-gradient(135deg,#312e81,#1e1b4b); border-color:#3730a3; box-shadow:0 4px 18px -6px rgba(99,102,241,0.55); }

/* Insumo type color accents (future) */
[data-icon-insumo*='fertilizante'] { background:linear-gradient(135deg,#fef3c7,#fde68a); }
[data-icon-insumo*='plaguicida'] { background:linear-gradient(135deg,#fee2e2,#fecaca); }
[data-icon-insumo*='semilla'] { background:linear-gradient(135deg,#f0fdf4,#dcfce7); }
[data-icon-insumo*='herramienta'] { background:linear-gradient(135deg,#e2e8f0,#f1f5f9); }
[data-icon-insumo*='equipo'] { background:linear-gradient(135deg,#e0f2fe,#bae6fd); }
html.dark [data-icon-insumo*='fertilizante'] { background:linear-gradient(135deg,#78350f,#92400e); }
html.dark [data-icon-insumo*='plaguicida'] { background:linear-gradient(135deg,#7f1d1d,#991b1b); }
html.dark [data-icon-insumo*='semilla'] { background:linear-gradient(135deg,#064e3b,#065f46); }
html.dark [data-icon-insumo*='herramienta'] { background:linear-gradient(135deg,#334155,#1e293b); }
html.dark [data-icon-insumo*='equipo'] { background:linear-gradient(135deg,#0c4a6e,#075985); }

/* Hydrated icon replacements (SVG) */
.hydrated-icon { font-size:0; line-height:0; display:flex; align-items:center; justify-content:center; }
.hydrated-icon svg { width:28px; height:28px; }



/* --- Compact Tiles --- */
.catalog-tile { background:linear-gradient(145deg,#ffffff,#f1f5f9); border:1px solid #e2e8f0; border-radius:24px; padding:12px 14px 14px; display:flex; flex-direction:column; gap:10px; position:relative; cursor:pointer; transition:.35s; min-height:120px; }
.catalog-tile:hover { box-shadow:0 10px 28px -10px rgba(0,0,0,0.18); transform:translateY(-4px); }
.catalog-tile:active { transform:translateY(-1px); }
html.dark .catalog-tile { background:linear-gradient(145deg,#1e293b,#0f172a); border-color:#334155; }
.tile-icon { width:42px; height:42px; border-radius:16px; background:#f1f5f9; display:flex; align-items:center; justify-content:center; font-size:22px; font-weight:600; border:1px solid #e2e8f0; flex-shrink:0; position:relative; overflow:hidden; }
html.dark .tile-icon { background:#1e293b; border-color:#334155; }
.tile-title { font-size:.75rem; font-weight:600; letter-spacing:.02em; margin:0; line-height:1.15; color:#0f172a; }
html.dark .tile-title { color:#e2e8f0; }
.tile-count { background:#16a34a; color:#fff; font-size:.55rem; font-weight:600; padding:4px 8px 3px; border-radius:999px; line-height:1; display:inline-flex; align-items:center; justify-content:center; }
.tile-mini-desc { font-size:.55rem; color:#64748b; font-weight:500; letter-spacing:.04em; margin-top:4px; line-height:1.2; }
html.dark .tile-mini-desc { color:#94a3b8; }
.tile-actions { position:absolute; top:8px; right:8px; display:flex; gap:4px; transition:.3s; }
.tile-actions .btn { box-shadow:none; }
.catalog-tile.expanded { grid-column:span 2; }
@media (min-width:1400px){ .catalog-tile.expanded { grid-column:span 2; } }
.tile-detail { position:absolute; inset:0; background:rgba(255,255,255,0.98); backdrop-filter:blur(10px); border:1px solid #e2e8f0; border-radius:22px; padding:16px 18px 18px; display:flex; flex-direction:column; overflow:hidden; animation:fadeInUp .4s; box-shadow:0 18px 60px -16px rgba(0,0,0,0.35); }
html.dark .tile-detail { background:rgba(15,23,42,0.95); border-color:#334155; }
.tile-detail-inner { overflow-y:auto; scrollbar-width:thin; display:flex; flex-direction:column; gap:12px; }
.tile-detail-inner::-webkit-scrollbar { width:6px; }
.tile-detail-inner::-webkit-scrollbar-track { background:transparent; }
.tile-detail-inner::-webkit-scrollbar-thumb { background:#cbd5e1; border-radius:3px; }
html.dark .tile-detail-inner::-webkit-scrollbar-thumb { background:#475569; }
.detail-desc { font-size:.6rem; line-height:1.2rem; color:#475569; margin:0; }
html.dark .detail-desc { color:#94a3b8; }
.detail-section-title { font-size:.55rem; font-weight:700; letter-spacing:.05em; text-transform:uppercase; color:#0f172a; margin-bottom:6px; }
html.dark .detail-section-title { color:#e2e8f0; }
.detail-list { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:10px; }
.detail-item { background:#f8fafc; border:1px solid #e2e8f0; border-radius:16px; padding:10px 12px; display:flex; flex-direction:column; gap:4px; position:relative; }
html.dark .detail-item { background:#1e293b; border-color:#334155; }
.detail-item .name-row { display:flex; justify-content:space-between; gap:8px; align-items:center; }
.detail-item .n { font-size:.65rem; font-weight:600; color:#0f172a; }
html.dark .detail-item .n { color:#e2e8f0; }
.detail-item .d { font-size:.5rem; font-weight:600; background:#2563eb; color:#fff; padding:3px 6px 2px; border-radius:999px; }
.detail-item .meta { font-size:.5rem; font-weight:500; color:#475569; letter-spacing:.03em; }
html.dark .detail-item .meta { color:#94a3b8; }
.detail-item .text { font-size:.5rem; line-height:.85rem; color:#64748b; }
html.dark .detail-item .text { color:#94a3b8; }
.detail-item .actions { display:flex; gap:4px; margin-top:2px; }
.detail-item .actions .btn { font-size:.5rem; padding:5px 8px; border-radius:8px; }
.detail-item .actions .btn-outline { background:#fff; }
html.dark .detail-item .actions .btn-outline { background:#1e293b; }
.mini-bars { display:flex; gap:2px; align-items:flex-end; height:34px; margin-bottom:8px; }
.mini-bars .bar { flex:1; background:linear-gradient(180deg,#16a34a,#22c55e); border-radius:4px 4px 0 0; position:relative; min-height:4px; }
.mini-bars .bar::after { content:attr(data-v); position:absolute; top:-14px; left:50%; transform:translateX(-50%); font-size:.45rem; font-weight:600; color:#166534; }
html.dark .mini-bars .bar { background:linear-gradient(180deg,#15803d,#16a34a); }
.tile-chart-placeholder { height:60px; border:1px dashed #cbd5e1; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:.5rem; font-weight:600; color:#64748b; }
html.dark .tile-chart-placeholder { border-color:#334155; color:#94a3b8; }
.catalog-tile.expanding { animation:fadeInUp .35s; }

/* --- Quick View Panel --- */
.quick-view-overlay { position:fixed; inset:0; background:rgba(15,23,42,0.55); backdrop-filter:blur(10px); display:flex; align-items:flex-start; justify-content:center; padding:90px 22px 60px; z-index:200; overflow-y:auto; }
.quick-view-panel { width:100%; max-width:880px; background:linear-gradient(145deg,rgba(255,255,255,0.9),rgba(241,245,249,0.92)); border:1px solid #e2e8f0; border-radius:40px; padding:34px 38px 42px; position:relative; display:flex; flex-direction:column; gap:26px; box-shadow:0 30px 110px -25px rgba(0,0,0,0.4); }
html.dark .quick-view-panel { background:linear-gradient(145deg,rgba(30,41,59,0.92),rgba(15,23,42,0.94)); border-color:#334155; }
.qv-header { display:flex; gap:18px; align-items:center; }
.qv-icon { width:72px; height:72px; border-radius:26px; background:linear-gradient(135deg,#dcfce7,#bbf7d0); display:flex; align-items:center; justify-content:center; font-size:40px; font-weight:600; border:1px solid #bbf7d0; box-shadow:0 6px 22px -8px rgba(16,185,129,0.4); }
html.dark .qv-icon { background:linear-gradient(135deg,#065f46,#064e3b); border-color:#065f46; }
.qv-header h3 { margin:0; font-size:1.35rem; letter-spacing:-.5px; font-weight:700; background:linear-gradient(90deg,#065f46,#16a34a); -webkit-background-clip:text; background-clip:text; color:transparent; }
.qv-sub { font-size:.65rem; font-weight:600; letter-spacing:.08em; text-transform:uppercase; color:#475569; margin-top:4px; }
html.dark .qv-sub { color:#94a3b8; }
.qv-close { position:absolute; top:16px; right:16px; width:42px; height:42px; border-radius:16px; background:#f1f5f9; border:1px solid #e2e8f0; font-size:1.4rem; font-weight:600; cursor:pointer; display:flex; align-items:center; justify-content:center; line-height:1; transition:.25s; }
.qv-close:hover { background:#e2e8f0; }
html.dark .qv-close { background:#1e293b; border-color:#334155; color:#e2e8f0; }
html.dark .qv-close:hover { background:#334155; }
.qv-body { display:flex; flex-direction:column; gap:22px; max-height:48vh; overflow-y:auto; scrollbar-width:thin; }
.qv-body::-webkit-scrollbar { width:8px; }
.qv-body::-webkit-scrollbar-thumb { background:#cbd5e1; border-radius:6px; }
html.dark .qv-body::-webkit-scrollbar-thumb { background:#475569; }
.qv-metrics { display:flex; flex-wrap:wrap; gap:14px; }
.metric-box { background:#f1f5f9; border:1px solid #e2e8f0; padding:12px 16px; border-radius:18px; display:flex; flex-direction:column; gap:4px; min-width:160px; }
html.dark .metric-box { background:#1e293b; border-color:#334155; }
.metric-box .label { font-size:.5rem; letter-spacing:.09em; font-weight:700; text-transform:uppercase; color:#475569; }
html.dark .metric-box .label { color:#94a3b8; }
.metric-box .val { font-size:1.1rem; font-weight:700; color:#0f172a; letter-spacing:-.5px; }
html.dark .metric-box .val { color:#e2e8f0; }
.detail-list .actions { justify-content:flex-end; }
@media (max-width:860px){
	.quick-view-panel { border-radius:32px; padding:26px 26px 34px; }
	.qv-icon { width:60px; height:60px; font-size:32px; border-radius:20px; }
	.qv-body { max-height:52vh; }
}


